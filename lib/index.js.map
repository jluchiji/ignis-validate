{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;;;;;;qBAoCwB,SAAS;;;;;sBA7BT,QAAQ;;;;iCACR,oBAAoB;;;;;;;;;;;;AAUrC,SAAS,OAAO,CAAC,KAAK,EAAE,IAAI,EAAE;AACnC,MAAI,MAAM,GAAG,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,QAAQ,CAAC;AAC7D,MAAI,CAAC,MAAM,EAAE;AAAE,WAAO,IAAI,CAAC;GAAE;;AAE7B,MAAI,KAAK,GAAI,oBAAE,KAAK,CAAC,oBAAE,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC;AACpC,MAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE;AACzD,UAAM,GAAG,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;GAC3B;;AAED,SAAO,+BAAW,QAAQ,CAAC,MAAM,CAAC,CAAC;CACpC;;;;;;;;AAQc,SAAS,SAAS,CAAC,KAAK,EAAE;AACvC,OAAK,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;CACzB","file":"index.js","sourcesContent":["/**\n * index.js\n *\n * @author  Denis Luchkin-Zhou <denis@ricepo.com>\n * @license MIT\n */\n\nimport _           from 'lodash';\nimport JsonSchema  from 'express-jsonschema';\n\n\n/**\n * factory(2)\n *\n * @param          {ignis}     Ignis instance.\n * @param          {meta}      Configuration metadata.\n * @returns        {Function}  Ignis.js middleware factory.\n */\nexport function factory(ignis, meta) {\n  let schema = meta.schema || meta.validation || meta.validate;\n  if (!schema) { return null; }\n\n  let check  = _.curry(_.has)(schema);\n  if (!check('body') && !check('query') && !check('params')) {\n    schema = { body: schema };\n  }\n\n  return JsonSchema.validate(schema);\n}\n\n\n/**\n * extension(1)\n *\n * @param          {ignis}     Ignis instance.\n */\nexport default function extension(ignis) {\n  ignis.pre.push(factory);\n}\n"],"sourceRoot":"/source/"}